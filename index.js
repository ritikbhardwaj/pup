import puppeteer from 'puppeteer';
import Queue from './queue.js';
import Browser from './browser.js';
import { stdout } from 'node:process';
import { Worker } from 'node:worker_threads';
import { EventEmitter } from 'node:events';

// 10 urls
const _urls = [
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p',
	'https://www.decathlon.in/p/8518851/shakers/gallon-bottle-2200-ml-black?id=8518851&type=p',
	'https://www.decathlon.in/p/8513471/quechua/2-person-camping-tent-mh100?id=8513471&type=p',
	'https://www.decathlon.in/p/8305983/cycle-pumps/cycling-floor-pump-100?id=8305983&type=p',
	'https://www.decathlon.in/p/8561145/quechua/inflatable-camping-mattress-air-basic-140-cm-2-person?id=8561145&type=p',
	'https://www.decathlon.in/p/8573880/chairs/camping-folding-armchair-blue?id=8573880&type=p',
	'https://www.decathlon.in/p/8786306/tables/camping-foldable-low-table-mh100-grey?id=8786306&type=p',
	'https://www.decathlon.in/p/8492721/quechua/camping-mug-stainless-steel-mh150-04l?id=8492721&type=p',
	'https://www.decathlon.in/p/8486727/forclaz/multi-pocket-bag-travel-bwn?id=8486727&type=p',
	'https://www.decathlon.in/p/8319097/men-shoes/men-waterproof-trekking-boots-100-grey?id=8319097&type=p',
	'https://www.decathlon.in/p/8786155/men-shoes/men-s-leather-boots-waterproof-vibram-mt500-brown?id=8786155&type=p'
]

const urls = _urls.slice(0,1);
const data = [];

const run = async () => {
	const browser = await Browser.newBrowser()
		.showWindow(false)
		.tabs(2)
		.launch(puppeteer);
	const pages = browser.pgRefs;
	while(urls.length) {
		for(let page of pages) {
			const url = urls.pop();
			await page.goto(url);
			const element = await page.waitForSelector('span.text-26');
			const value = await element.evaluate(el => el.textContent);
			data.push({ url, price: value });
		}
	}
	browser.close();
}

run();
